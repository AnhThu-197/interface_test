<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Báo Cáo Thống Kê - Quản Trị Viên</title>
    <link rel="stylesheet" href="../../css/main.css" />
    <link rel="stylesheet" href="../../css/Navbar/navbar.css" />
    <link rel="stylesheet" href="../../css/Admin/admin-base.css" />
    <link rel="stylesheet" href="../../css/Admin/tongquan.css" />
    <link rel="stylesheet" href="../../css/Admin/thongke.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Dancing+Script|Itim|Lobster|Montserrat:500|Noto+Serif|Nunito|Patrick+Hand|Roboto+Mono:100,100i,300,300i,400,400i,500,500i,700,700i|Roboto+Slab|Saira" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  </head>

  <body>
    <header>
      <div class="head2">
        <div>
          <a href="../../trangchu.html">
            <img class="logo-trangchu" src="../../images/logohandmade.jpg" alt="logo" />
          </a>
        </div>
        <div class="head2--list">
          <form action="" id="search-box">
            <buttom class="search-bottom">
              <img width="18" height="18" src="https://img.icons8.com/ios-glyphs/30/search--v1.png" alt="search--v1" />
            </buttom>
            <input id="search-text" type="text" placeholder="Tìm kiếm" />
            <button class="search-bottom">
              <img class="search-bottom-vid" src="../../images/scan-image.gif" alt="" srcset="" />
            </button>
          </form>
          <div id="store">
            <img width="28" height="28" src="https://img.icons8.com/wired/64/online-store.png" alt="online-store" />
            <a href="../HeThongCuaHang.html">
              <p>Hệ thống cửa hàng</p>
            </a>
          </div>
          <div id="news">
            <img width="25" height="25" src="https://img.icons8.com/external-nawicon-detailed-outline-nawicon/64/external-newspaper-communication-nawicon-detailed-outline-nawicon.png" alt="external-newspaper-communication-nawicon-detailed-outline-nawicon" />
            <a href="../../trangchu.html#MAGAZINE">
              <p>Danh mục</p>
            </a>
          </div>
          <div id="login">
            <img width="28" height="28" src="https://img.icons8.com/parakeet-line/48/user-male-circle.png" alt="user-male-circle" />
            <a href="../ThongTinCaNhan.html">
              <p>Quản trị viên</p>
            </a>
            <div class="notifications">
              <i class="fas fa-bell"></i>
              <span class="notification-badge">3</span>
            </div>
          </div>
        </div>
      </div>
    </header>

    <main>
      <div class="admin-breadcrumb">
        <a href="../../trangchu.html">Trang chủ</a> &gt;
        <span>Báo cáo thống kê</span>
      </div>

      <div class="admin-container">
        <div class="admin-sidebar">
          <div class="sidebar-header">
            <div class="admin-avatar">
              <img src="../../images/admin.jpg" alt="Admin" />
            </div>
            <div class="admin-info">
              <h3>Nguyễn Thư</h3>
              <p>Hội Sinh Viên UTE</p>
              <span class="admin-id">ID: ADMIN232240</span>
            </div>
          </div>
          
          <div class="sidebar-menu">
            <div class="menu-section">
              <h4>TỔNG QUAN</h4>
              <ul>
                <li>
                  <a href="Dashboard.html"><i class="fas fa-home"></i> Dashboard</a>
                </li>
                <li class="active">
                  <a href="ThongKe.html"><i class="fas fa-chart-bar"></i> Báo cáo - Thống kê</a>
                </li>
              </ul>
            </div>
            
            <div class="menu-section">
              <h4>QUẢN LÝ SẢN PHẨM</h4>
              <ul>
                <li>
                  <a href="QuanLySanPham.html"><i class="fas fa-box"></i> Cập nhật sản phẩm</a>
                </li>
                <li>
                  <a href="QuanLyNguyenLieu.html"><i class="fas fa-cubes"></i> Cập nhật nguyên liệu</a>
                </li>
                <li>
                  <a href="QuanLyPhieuNhap.html"><i class="fas fa-clipboard-list"></i> Cập nhật phiếu nhập</a>
                </li>
                <li>
                  <a href="QuanLyNhaCungCap.html"><i class="fas fa-truck"></i> Cập nhật nhà cung cấp</a>
                </li>
              </ul>
            </div>
            
            <div class="menu-section">
              <h4>QUẢN LÝ ĐƠN HÀNG</h4>
              <ul>
                <li>
                  <a href="QuanLyDonHang.html"><i class="fas fa-shopping-cart"></i> Cập nhật trạng thái đơn hàng</a>
                </li>
                <li>
                  <a href="VanChuyen.html"><i class="fas fa-shipping-fast"></i> Cài đặt vận chuyển</a>
                </li>
                <li>
                  <a href="QuanLyDonLam.html"><i class="fas fa-tasks"></i> Cập nhật đơn làm</a>
                </li>
              </ul>
            </div>
            
            <div class="menu-section">
              <h4>QUẢN LÝ NHÂN VIÊN</h4>
              <ul>
                <li>
                  <a href="QuanLyNhanVien.html"><i class="fas fa-users"></i> Cập nhật nhân viên</a>
                </li>
                <li>
                  <a href="DieuKienThamGia.html"><i class="fas fa-user-check"></i> Cập nhật điều kiện tham gia</a>
                </li>
                <li>
                  <a href="QuyTrinh.html"><i class="fas fa-sitemap"></i> Cập nhật quy trình làm việc</a>
                </li>
                <li>
                  <a href="QuyDinh.html"><i class="fas fa-book"></i> Cập nhật quy định làm việc</a>
                </li>
                <li>
                  <a href="ThanhToan.html"><i class="fas fa-money-bill-wave"></i> Thanh toán tiền công</a>
                </li>
              </ul>
            </div>
            
            <div class="menu-section">
              <h4>KHÁC</h4>
              <ul>
                <li>
                  <a href="DoiTac.html"><i class="fas fa-handshake"></i> Quản lý đối tác</a>
                </li>
                <li>
                  <a href="TaiChinh.html"><i class="fas fa-chart-line"></i> Theo dõi tài chính</a>
                </li>
                <li>
                  <a href="DanhGia.html"><i class="fas fa-star"></i> Phản hồi đánh giá</a>
                </li>
                <li>
                  <a href="TaiKhoan.html"><i class="fas fa-user-cog"></i> Cập nhật tài khoản</a>
                </li>
              </ul>
            </div>
          </div>
        </div>

        <div class="admin-content">
          <div class="page-title">
            <h1>Báo Cáo Thống Kê</h1>
            <div class="report-actions">
              <select id="reportType" class="report-select">
                <option value="revenue">Báo cáo doanh thu</option>
                <option value="product">Báo cáo sản phẩm</option>
                <option value="employee">Báo cáo nhân viên</option>
                <option value="material">Báo cáo nguyên liệu</option>
                <option value="quality">Báo cáo chất lượng</option>
              </select>
              <div class="date-range">
                <input type="date" id="startDateReport" class="date-input" />
                <span>đến</span>
                <input type="date" id="endDateReport" class="date-input" />
                <button class="apply-btn">Áp dụng</button>
              </div>
              <button class="export-btn"><i class="fas fa-download"></i> Xuất báo cáo</button>
            </div>
          </div>

          <div class="report-summary">
            <div class="summary-card revenue">
              <div class="summary-icon">
                <i class="fas fa-money-bill-wave"></i>
              </div>
              <div class="summary-content">
                <h3>Tổng doanh thu</h3>
                <div class="summary-value">568.320.000₫</div>
                <div class="summary-change positive">
                  <i class="fas fa-arrow-up"></i> 12.5% so với kỳ trước
                </div>
              </div>
            </div>
            <div class="summary-card profit">
              <div class="summary-icon">
                <i class="fas fa-chart-line"></i>
              </div>
              <div class="summary-content">
                <h3>Lợi nhuận</h3>
                <div class="summary-value">215.960.000₫</div>
                <div class="summary-change positive">
                  <i class="fas fa-arrow-up"></i> 8.3% so với kỳ trước
                </div>
              </div>
            </div>
            <div class="summary-card orders">
              <div class="summary-icon">
                <i class="fas fa-shopping-cart"></i>
              </div>
              <div class="summary-content">
                <h3>Đơn hàng</h3>
                <div class="summary-value">1,245</div>
                <div class="summary-change positive">
                  <i class="fas fa-arrow-up"></i> 15.2% so với kỳ trước
                </div>
              </div>
            </div>
            <div class="summary-card customers">
              <div class="summary-icon">
                <i class="fas fa-users"></i>
              </div>
              <div class="summary-content">
                <h3>Khách hàng mới</h3>
                <div class="summary-value">378</div>
                <div class="summary-change positive">
                  <i class="fas fa-arrow-up"></i> 5.7% so với kỳ trước
                </div>
              </div>
            </div>
          </div>

          <div class="report-charts">
            <div class="chart-section">
              <div class="chart-header">
                <h2>Doanh thu theo thời gian</h2>
                <div class="chart-controls">
                  <button class="chart-btn active" data-period="month">Tháng</button>
                  <button class="chart-btn" data-period="quarter">Quý</button>
                  <button class="chart-btn" data-period="year">Năm</button>
                </div>
              </div>
              <div class="chart-container">
                <canvas id="revenueTimeChart"></canvas>
              </div>
            </div>

            <div class="chart-section">
              <div class="chart-header">
                <h2>Tỷ lệ doanh thu theo danh mục</h2>
              </div>
              <div class="chart-container">
                <canvas id="categoryChart"></canvas>
              </div>
            </div>
          </div>

          <div class="report-detailed">
            <div class="section-header">
              <h2>Chi tiết doanh thu theo sản phẩm</h2>
              <div class="section-filter">
                <select id="productFilter" class="filter-select">
                  <option value="all">Tất cả sản phẩm</option>
                  <option value="handmade">Túi handmade</option>
                  <option value="greeting">Thiệp handmade</option>
                  <option value="keychain">Móc khóa</option>
                  <option value="bracelet">Vòng tay</option>
                  <option value="giftbox">Hộp quà</option>
                </select>
                <div class="search-filter">
                  <input type="text" placeholder="Tìm kiếm sản phẩm" />
                  <button><i class="fas fa-search"></i></button>
                </div>
              </div>
            </div>
            
            <div class="report-table">
              <table>
                <thead>
                  <tr>
                    <th>Mã SP</th>
                    <th>Tên sản phẩm</th>
                    <th>Danh mục</th>
                    <th>Số lượng bán</th>
                    <th>Doanh thu</th>
                    <th>Lợi nhuận</th>
                    <th>Tỷ suất LN</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>SP001</td>
                    <td>Túi xách handmade mẫu A</td>
                    <td>Túi handmade</td>
                    <td>120</td>
                    <td>36,000,000₫</td>
                    <td>14,400,000₫</td>
                    <td>40%</td>
                  </tr>
                  <tr>
                    <td>SP002</td>
                    <td>Móc khóa handmade hình thú</td>
                    <td>Móc khóa</td>
                    <td>350</td>
                    <td>17,500,000₫</td>
                    <td>8,750,000₫</td>
                    <td>50%</td>
                  </tr>
                  <tr>
                    <td>SP003</td>
                    <td>Thiệp sinh nhật 3D</td>
                    <td>Thiệp handmade</td>
                    <td>240</td>
                    <td>24,000,000₫</td>
                    <td>14,400,000₫</td>
                    <td>60%</td>
                  </tr>
                  <tr>
                    <td>SP004</td>
                    <td>Vòng tay đá tự nhiên</td>
                    <td>Vòng tay</td>
                    <td>180</td>
                    <td>27,000,000₫</td>
                    <td>10,800,000₫</td>
                    <td>40%</td>
                  </tr>
                  <tr>
                    <td>SP005</td>
                    <td>Hộp quà vintage</td>
                    <td>Hộp quà</td>
                    <td>95</td>
                    <td>38,000,000₫</td>
                    <td>15,200,000₫</td>
                    <td>40%</td>
                  </tr>
                </tbody>
              </table>
            </div>
            
            <div class="pagination">
              <button class="page-btn prev-btn"><i class="fas fa-chevron-left"></i></button>
              <button class="page-btn active">1</button>
              <button class="page-btn">2</button>
              <button class="page-btn">3</button>
              <span class="page-ellipsis">...</span>
              <button class="page-btn">10</button>
              <button class="page-btn next-btn"><i class="fas fa-chevron-right"></i></button>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer>
      <div class="item item-1">
        <h4>Follow Us</h4>
        <div class="icon">
          <img src="../../images/logo.jpg" alt="" />
          <br />
          <a href="#"><i class="fa-brands fa-facebook"></i></a>
          <a href="#"><i class="fa-brands fa-twitter"></i></a>
          <a href="#"><i class="fa-brands fa-instagram"></i></a>
          <a href="#"><i class="fa-brands fa-youtube"></i></a>
        </div>
      </div>
      <div class="item">
        <h4>VỀ CHÚNG TÔI</h4>
        <ul>
          <li><a href="#">Câu chuyện thương hiệu</a></li>
          <li><a href="#">Về chúng tôi</a></li>
          <li><a href="#">Liên hệ</a></li>
        </ul>
      </div>
      <div class="item">
        <h4>CHÍNH SÁCH</h4>
        <ul>
          <li><a href="#">Chính sách và quy định chung</a></li>
          <li><a href="#">Chính sách và giao nhận thanh toán</a></li>
          <li><a href="#">Chính sách đổi trả sản phẩm</a></li>
          <li><a href="#">Chính sách bảo mật thông tin cá nhân</a></li>
          <li><a href="#">Điều khoản sử dụng</a></li>
        </ul>
      </div>
      <div class="item">
        <h4>MY BEAUTY</h4>
        <ul>
          <li><a href="#">Quyền lợi thành viên</a></li>
          <li><a href="#">Thông tin thành viên</a></li>
          <li><a href="#">Theo dõi đơn hàng</a></li>
          <li><a href="#">Hướng dẫn mua hàng online</a></li>
        </ul>
      </div>
    </footer>

    <script src="../../js/utils/dataLoader.js"></script>
    <script src="../../js/utils/productUtils.js"></script>
    <script src="../../js/utils/searchUtils.js"></script>
    <script src="../../js/utils/message.js"></script>
    <script src="../../js/utils/auth.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Revenue Time Chart
        const revenueTimeCtx = document.getElementById('revenueTimeChart').getContext('2d');
        const revenueTimeChart = new Chart(revenueTimeCtx, {
          type: 'line',
          data: {
            labels: ['T1', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'T8', 'T9', 'T10', 'T11', 'T12'],
            datasets: [{
              label: 'Doanh thu',
              data: [35, 42, 48, 53, 58, 65, 70, 75, 80, 85, 90, 95],
              backgroundColor: 'rgba(51, 51, 51, 0.1)',
              borderColor: '#333',
              borderWidth: 2,
              tension: 0.3,
              fill: true
            }, {
              label: 'Lợi nhuận',
              data: [15, 18, 22, 25, 28, 32, 35, 38, 42, 45, 48, 52],
              backgroundColor: 'rgba(76, 175, 80, 0.1)',
              borderColor: '#4CAF50',
              borderWidth: 2,
              tension: 0.3,
              fill: true
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            interaction: {
              mode: 'index',
              intersect: false,
            },
            plugins: {
              legend: {
                position: 'top',
              }
            },
            scales: {
              y: {
                beginAtZero: true,
                ticks: {
                  callback: function(value) {
                    return value + ' tr';
                  }
                }
              }
            }
          }
        });
        
        // Category Chart
        const categoryCtx = document.getElementById('categoryChart').getContext('2d');
        const categoryChart = new Chart(categoryCtx, {
          type: 'pie',
          data: {
            labels: ['Túi handmade', 'Thiệp handmade', 'Móc khóa', 'Vòng tay', 'Hộp quà'],
            datasets: [{
              data: [30, 25, 15, 20, 10],
              backgroundColor: [
                '#4CAF50',
                '#2196F3',
                '#FF9800',
                '#9C27B0',
                '#F44336'
              ],
              borderWidth: 1
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                position: 'right',
              }
            }
          }
        });
        
        // Handle chart period buttons
        const chartButtons = document.querySelectorAll('.chart-btn');
        
        chartButtons.forEach(button => {
          button.addEventListener('click', function() {
            chartButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
            
            const period = this.getAttribute('data-period');
            
            if (period === 'month') {
              revenueTimeChart.data.labels = ['T1', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'T8', 'T9', 'T10', 'T11', 'T12'];
              revenueTimeChart.data.datasets[0].data = [35, 42, 48, 53, 58, 65, 70, 75, 80, 85, 90, 95];
              revenueTimeChart.data.datasets[1].data = [15, 18, 22, 25, 28, 32, 35, 38, 42, 45, 48, 52];
            } else if (period === 'quarter') {
              revenueTimeChart.data.labels = ['Q1/2022', 'Q2/2022', 'Q3/2022', 'Q4/2022', 'Q1/2023', 'Q2/2023', 'Q3/2023', 'Q4/2023'];
              revenueTimeChart.data.datasets[0].data = [120, 135, 150, 165, 185, 200, 220, 240];
              revenueTimeChart.data.datasets[1].data = [55, 62, 70, 78, 90, 98, 110, 125];
            } else if (period === 'year') {
              revenueTimeChart.data.labels = ['2018', '2019', '2020', '2021', '2022', '2023'];
              revenueTimeChart.data.datasets[0].data = [380, 450, 420, 510, 580, 650];
              revenueTimeChart.data.datasets[1].data = [180, 210, 200, 250, 290, 320];
            }
            
            revenueTimeChart.update();
          });
        });
        
        // Pagination
        const pageButtons = document.querySelectorAll('.page-btn:not(.prev-btn):not(.next-btn)');
        
        pageButtons.forEach(button => {
          button.addEventListener('click', function() {
            pageButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
          });
        });
      });
    </script>
  </body>
</html> 