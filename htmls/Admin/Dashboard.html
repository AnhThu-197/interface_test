<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quản Trị Viên</title>
    <link rel="stylesheet" href="../../css/main.css" />
    <link rel="stylesheet" href="../../css/Navbar/navbar.css" />
    <link rel="stylesheet" href="../../css/Admin/tongquan.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Dancing+Script|Itim|Lobster|Montserrat:500|Noto+Serif|Nunito|Patrick+Hand|Roboto+Mono:100,100i,300,300i,400,400i,500,500i,700,700i|Roboto+Slab|Saira" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  </head>

  <body>
    <header>
      <div class="head2">
        <div>
          <a href="../../trangchu.html">
            <img class="logo-trangchu" src="../../images/logohandmade.jpg" alt="logo" />
          </a>
        </div>
        <div class="head2--list">
          <form action="" id="search-box">
            <buttom class="search-bottom">
              <img width="18" height="18" src="https://img.icons8.com/ios-glyphs/30/search--v1.png" alt="search--v1" />
            </buttom>
            <input id="search-text" type="text" placeholder="Tìm kiếm" />
            <button class="search-bottom">
              <img class="search-bottom-vid" src="../../images/scan-image.gif" alt="" srcset="" />
            </button>
          </form>
          <div id="store">
            <img width="28" height="28" src="https://img.icons8.com/wired/64/online-store.png" alt="online-store" />
            <a href="../HeThongCuaHang.html">
              <p>Hệ thống cửa hàng</p>
            </a>
          </div>
          <div id="news">
            <img width="25" height="25" src="https://img.icons8.com/external-nawicon-detailed-outline-nawicon/64/external-newspaper-communication-nawicon-detailed-outline-nawicon.png" alt="external-newspaper-communication-nawicon-detailed-outline-nawicon" />
            <a href="../../trangchu.html#MAGAZINE">
              <p>Danh mục</p>
            </a>
          </div>
          <div id="login">
            <img width="28" height="28" src="https://img.icons8.com/parakeet-line/48/user-male-circle.png" alt="user-male-circle" />
            <a href="../ThongTinCaNhan.html">
              <p>Admin</p>
            </a>
            <div class="notifications">
              <i class="fas fa-bell"></i>
              <span class="notification-badge">3</span>
            </div>
          </div>
        </div>
      </div>
    </header>

    <main>
      <div class="admin-breadcrumb">
        <a href="../../trangchu.html">Trang chủ</a> &gt;
        <span>Báo cáo - Thống Kê</span>
      </div>

      <div class="admin-container">
        <div class="admin-sidebar">
          <div class="sidebar-header">
            <div class="admin-avatar">
              <img src="../../images/admin.jpg" alt="Admin" />
            </div>
            <div class="admin-info">
              <h3>Nguyễn Thư</h3>
              <p>Hội Sinh Viên UTE</p>
              <span class="admin-id">ID: ADMIN232240</span>
            </div>
          </div>
          
          <div class="sidebar-menu">
            <div class="menu-section">
              <h4>TỔNG QUAN</h4>
              <ul>
                <li class="active">
                  <a href="Dashboard.html"><i class="fas fa-home"></i> Báo cáo - Thống kê </a>
                </li>
              </ul>
            </div>
            
            <div class="menu-section">
              <h4>QUẢN LÝ SẢN PHẨM</h4>
              <ul>
                <li>
                  <a href="QuanLySanPham.html"><i class="fas fa-box"></i> Cập nhật sản phẩm</a>
                </li>
                <li>
                  <a href="QuanLyNguyenLieu.html"><i class="fas fa-cubes"></i> Cập nhật nguyên liệu</a>
                </li>
                <li>
                  <a href="QuanLyPhieuNhap.html"><i class="fas fa-clipboard-list"></i> Cập nhật phiếu nhập</a>
                </li>
                <li>
                  <a href="QuanLyNhaCungCap.html"><i class="fas fa-truck"></i> Cập nhật nhà cung cấp</a>
                </li>
              </ul>
            </div>
            
            <div class="menu-section">
              <h4>QUẢN LÝ ĐƠN HÀNG</h4>
              <ul>
                <li>
                  <a href="QuanLyDonHang.html"><i class="fas fa-shopping-cart"></i> Cập nhật trạng thái đơn hàng </a>
                </li>
                <li>
                  <a href="VanChuyen.html"><i class="fas fa-shipping-fast"></i> Cài đặt vận chuyển </a>
                </li>
                <li>
                  <a href="QuanLyDonLam.html"><i class="fas fa-tasks"></i> Cập nhật đơn làm </a>
                </li>
                <li>
                  <a href="QuanLyDoiTra.html"><i class="fas fa-tasks"></i> Quản lí đổi trả </a>
                </li>
              </ul>
            </div>
            
            <div class="menu-section">
              <h4>QUẢN LÝ NHÂN VIÊN</h4>
              <ul>
                <li>
                  <a href="QuanLyNhanVien.html"><i class="fas fa-users"></i> Cập nhật nhân viên</a>
                </li>
                <li>
                  <a href="DieuKienThamGia.html"><i class="fas fa-user-check"></i> Cập nhật điều kiện tham gia</a>
                </li>
                <li>
                  <a href="QuyTrinh.html"><i class="fas fa-sitemap"></i> Cập nhật quy trình làm việc</a>
                </li>
                <li>
                  <a href="QuyDinh.html"><i class="fas fa-book"></i> Cập nhật quy định làm việc</a>
                </li>
                <li>
                  <a href="ThanhToan.html"><i class="fas fa-money-bill-wave"></i> Thanh toán tiền công</a>
                </li>
              </ul>
            </div>
            
            <div class="menu-section">
              <h4>KHÁC</h4>
              <ul>
                <li>
                  <a href="TaiChinh.html"><i class="fas fa-chart-line"></i> Theo dõi tài chính</a>
                </li>
                <li>
                  <a href="DanhGia.html"><i class="fas fa-star"></i> Phản hồi đánh giá</a>
                </li>
                <li>
                  <a href="TaiKhoan.html"><i class="fas fa-user-cog"></i> Cập nhật tài khoản</a>
                </li>
              </ul>
            </div>
          </div>
        </div>

        <div class="admin-content">
          <div class="page-title">
            <h1>Dashboard</h1>
            <div class="date-filter">
              <!-- <button class="date-btn active">Hôm nay</button>
              <button class="date-btn">Tháng này</button>
              <button class="date-btn">Năm nay</button> -->
              <div class="custom-date">
                <input type="date" id="startDate" />
                <span>đến</span>
                <input type="date" id="endDate" />
                <button class="apply-btn">Áp dụng</button>
                <button class="date-btn"><i class="fas fa-download"></i> Xuất báo cáo</button>
              </div>
            </div>
          </div>

          <div class="stats-overview">
            <div class="stats-card">
              <div class="stats-icon orders">
                <i class="fas fa-shopping-cart"></i>
              </div>
              <div class="stats-content">
                <h3>Đơn hàng</h3>
                <div class="stats-value">125</div>
                <div class="stats-change positive">
                  <i class="fas fa-arrow-up"></i> 15.2% <span>so với hôm qua</span>
                </div>
              </div>
            </div>
            <div class="stats-card">
              <div class="stats-icon revenue">
                <i class="fas fa-money-bill-wave"></i>
              </div>
              <div class="stats-content">
                <h3>Doanh thu</h3>
                <div class="stats-value">45.800.000₫</div>
                <div class="stats-change positive">
                  <i class="fas fa-arrow-up"></i> 8.5% <span>so với hôm qua</span>
                </div>
              </div>
            </div>
            <div class="stats-card">
              <div class="stats-icon products">
                <i class="fas fa-box"></i>
              </div>
              <div class="stats-content">
                <h3>Sản phẩm nộp</h3>
                <div class="stats-value">238</div>
                <div class="stats-change positive">
                  <i class="fas fa-arrow-up"></i> 12.7% <span>so với hôm qua</span>
                </div>
              </div>
            </div>
            <div class="stats-card">
              <div class="stats-icon employees">
                <i class="fas fa-users"></i>
              </div>
              <div class="stats-content">
                <h3>Nhân viên mới</h3>
                <div class="stats-value">14</div>
                <div class="stats-change negative">
                  <i class="fas fa-arrow-down"></i> 3.2% <span>so với hôm qua</span>
                </div>
              </div>
            </div>
          </div>

          <div class="analytics-section">
            <div class="chart-container">
              <div class="chart-header">
                <h2>Doanh thu (Triệu VNĐ)</h2>
                <div class="chart-actions">
                  <select id="chartPeriod">
                    <option value="day">Theo ngày</option>
                    <option value="week">Theo tuần</option>
                    <option value="month" selected>Theo tháng</option>
                  </select>
                </div>
              </div>
              <div class="chart-content">
                <canvas id="revenueChart"></canvas>
              </div>
            </div>
            <div class="chart-container">
              <div class="chart-header">
                <h2>Phân tích sản phẩm</h2>
                <div class="chart-actions">
                  <button class="chart-btn active" data-chart="sales">Bán chạy nhất</button>
                  <button class="chart-btn" data-chart="profit">Lợi nhuận cao nhất</button>
                </div>
              </div>
              <div class="chart-content">
                <canvas id="productChart"></canvas>
              </div>
            </div>
          </div>

          <!-- <div class="dashboard-sections">
            <div class="recent-orders">
              <div class="section-header">
                <h2>Đơn hàng gần đây</h2>
                <a href="QuanLyDonHang.html" class="view-all">Xem tất cả <i class="fas fa-arrow-right"></i></a>
              </div>
              <div class="section-content">
                <table>
                  <thead>
                    <tr>
                      <th>Mã đơn</th>
                      <th>Khách hàng</th>
                      <th>Sản phẩm</th>
                      <th>Tổng tiền</th>
                      <th>Trạng thái</th>
                      <th>Thời gian</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>#ORD-8956</td>
                      <td>Nguyễn Thị B</td>
                      <td>3 sản phẩm</td>
                      <td>850.000₫</td>
                      <td><span class="status-badge status-delivered">Đã giao</span></td>
                      <td>15/06/2023 14:30</td>
                    </tr>
                    <tr>
                      <td>#ORD-8955</td>
                      <td>Trần Văn C</td>
                      <td>1 sản phẩm</td>
                      <td>350.000₫</td>
                      <td><span class="status-badge status-processing">Đang xử lý</span></td>
                      <td>15/06/2023 13:45</td>
                    </tr>
                    <tr>
                      <td>#ORD-8954</td>
                      <td>Lê Thị D</td>
                      <td>4 sản phẩm</td>
                      <td>1.250.000₫</td>
                      <td><span class="status-badge status-shipped">Đang giao</span></td>
                      <td>15/06/2023 11:20</td>
                    </tr>
                    <tr>
                      <td>#ORD-8953</td>
                      <td>Phạm Văn E</td>
                      <td>2 sản phẩm</td>
                      <td>520.000₫</td>
                      <td><span class="status-badge status-pending">Chờ thanh toán</span></td>
                      <td>15/06/2023 10:15</td>
                    </tr>
                    <tr>
                      <td>#ORD-8952</td>
                      <td>Hoàng Thị F</td>
                      <td>5 sản phẩm</td>
                      <td>1.540.000₫</td>
                      <td><span class="status-badge status-delivered">Đã giao</span></td>
                      <td>15/06/2023 09:30</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            
            <div class="pending-approvals">
              <div class="section-header">
                <h2>Cần duyệt</h2>
                <div class="tab-selector">
                  <button class="tab-btn active" data-tab="products">Sản phẩm (12)</button>
                  <button class="tab-btn" data-tab="employees">Đăng ký NV (7)</button>
                  <button class="tab-btn" data-tab="withdrawals">Rút tiền (5)</button>
                </div>
              </div>
              <div class="section-content">
                <div class="tab-content active" id="products-tab">
                  <div class="approval-item">
                    <div class="item-info">
                      <div class="item-img">
                        <img src="../../images/handmade9.jpg" alt="Túi thủ công mỹ nghệ" />
                      </div>
                      <div class="item-details">
                        <h4>Túi thủ công mỹ nghệ</h4>
                        <p>Nộp bởi: Nguyễn Hoàng Anh Thư</p>
                        <span class="time">15/06/2023 14:30</span>
                      </div>
                    </div>
                    <div class="item-actions">
                      <button class="action-btn approve-btn"><i class="fas fa-check"></i> Duyệt</button>
                      <button class="action-btn reject-btn"><i class="fas fa-times"></i> Từ chối</button>
                    </div>
                  </div>
                  <div class="approval-item">
                    <div class="item-info">
                      <div class="item-img">
                        <img src="../../images/handmade10.jpg" alt="Thiệp thủ công handmade" />
                      </div>
                      <div class="item-details">
                        <h4>Thiệp thủ công handmade</h4>
                        <p>Nộp bởi: Nguyễn Phương</p>
                        <span class="time">15/06/2023 13:15</span>
                      </div>
                    </div>
                    <div class="item-actions">
                      <button class="action-btn approve-btn"><i class="fas fa-check"></i> Duyệt</button>
                      <button class="action-btn reject-btn"><i class="fas fa-times"></i> Từ chối</button>
                    </div>
                  </div>
                  <div class="approval-item">
                    <div class="item-info">
                      <div class="item-img">
                        <img src="../../images/handmade4.jpg" alt="Móc khóa handmade" />
                      </div>
                      <div class="item-details">
                        <h4>Hộp đèn "Đêm Đầy Sao"</h4>
                        <p>Nộp bởi: Nguyễn Thị Huyền</p>
                        <span class="time">15/06/2023 11:45</span>
                      </div>
                    </div>
                    <div class="item-actions">
                      <button class="action-btn approve-btn"><i class="fas fa-check"></i> Duyệt</button>
                      <button class="action-btn reject-btn"><i class="fas fa-times"></i> Từ chối</button>
                    </div>
                  </div>
                </div>

                <div class="tab-content" id="employees-tab">
                </div>

                <div class="tab-content" id="withdrawals-tab">
                </div>
              </div>
            </div>
          </div> -->
        </div>
      </div>
    </main>

    <footer>
      <div class="item item-1">
        <h4>Follow Us</h4>
        <div class="icon">
          <img src="../../images/logohandmade.jpg" alt="" />
          <br />
          <a href="#"><i class="fa-brands fa-facebook"></i></a>
          <a href="#"><i class="fa-brands fa-twitter"></i></a>
          <a href="#"><i class="fa-brands fa-instagram"></i></a>
          <a href="#"><i class="fa-brands fa-youtube"></i></a>
        </div>
      </div>
      <div class="item">
        <h4>VỀ CHÚNG TÔI</h4>
        <ul>
          <li><a href="#">Câu chuyện thương hiệu</a></li>
          <li><a href="#">Về chúng tôi</a></li>
          <li><a href="#">Liên hệ</a></li>
        </ul>
      </div>
      <div class="item">
        <h4>CHÍNH SÁCH</h4>
        <ul>
          <li><a href="#">Chính sách và quy định chung</a></li>
          <li><a href="#">Chính sách giao nhận thanh toán</a></li>
          <li><a href="#">Chính sách đổi trả sản phẩm</a></li>
        </ul>
      </div>
      <div class="item">
        <h4>MY SHOP</h4>
        <ul>
          <li><a href="#">Quyền lợi thành viên</a></li>
          <li><a href="#">Thông tin thành viên</a></li>
          <li><a href="#">Theo dõi đơn hàng</a></li>
        </ul>
      </div>
    </footer>

    <script src="../../js/utils/dataLoader.js"></script>
    <script src="../../js/utils/productUtils.js"></script>
    <script src="../../js/utils/searchUtils.js"></script>
    <script src="../../js/utils/message.js"></script>
    <script src="../../js/utils/auth.js"></script>
    <script src="../../js/utils/cart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
      // Toggle active state for date filter buttons
      const dateButtons = document.querySelectorAll('.date-btn');
      
      dateButtons.forEach(button => {
        button.addEventListener('click', function() {
          dateButtons.forEach(btn => {
            btn.classList.remove('active');
          });
          
          this.classList.add('active');
        });
      });
      
      // Tab selector for pending approvals
      const tabButtons = document.querySelectorAll('.tab-btn');
      const tabContents = document.querySelectorAll('.tab-content');
      
      tabButtons.forEach(button => {
        button.addEventListener('click', function() {
          const tabName = this.getAttribute('data-tab');
          
          // Remove active class from all buttons and contents
          tabButtons.forEach(btn => btn.classList.remove('active'));
          tabContents.forEach(content => content.classList.remove('active'));
          
          // Add active class to clicked button and corresponding content
          this.classList.add('active');
          document.getElementById(`${tabName}-tab`).classList.add('active');
        });
      });
      
      // Chart data and options
      document.addEventListener('DOMContentLoaded', function() {
        // Revenue Chart
        const revenueCtx = document.getElementById('revenueChart').getContext('2d');
        const revenueChart = new Chart(revenueCtx, {
          type: 'line',
          data: {
            labels: ['T1', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'T8', 'T9', 'T10', 'T11', 'T12'],
            datasets: [{
              label: 'Doanh thu',
              data: [25, 30, 35, 42, 48, 53, 58, 65, 60, 70, 75, 80],
              backgroundColor: 'rgba(51, 51, 51, 0.1)',
              borderColor: '#333',
              borderWidth: 2,
              tension: 0.3,
              fill: true
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                display: false
              }
            },
            scales: {
              y: {
                beginAtZero: true,
                ticks: {
                  callback: function(value) {
                    return value + ' tr';
                  }
                }
              }
            }
          }
        });
        
        // Product Chart
        const productCtx = document.getElementById('productChart').getContext('2d');
        const productChart = new Chart(productCtx, {
          type: 'bar',
          data: {
            labels: ['Túi handmade', 'Thiệp handmade', 'Móc khóa', 'Vòng tay', 'Hộp quà'],
            datasets: [{
              label: 'Số lượng bán ra',
              data: [120, 90, 180, 70, 110],
              backgroundColor: [
                '#4CAF50',
                '#2196F3',
                '#FF9800',
                '#9C27B0',
                '#F44336'
              ],
              borderWidth: 0
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                display: false
              }
            },
            scales: {
              y: {
                beginAtZero: true
              }
            }
          }
        });
        
        // Switch between sales and profit data
        const chartButtons = document.querySelectorAll('.chart-btn');
        
        chartButtons.forEach(button => {
          button.addEventListener('click', function() {
            chartButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
            
            const chartType = this.getAttribute('data-chart');
            
            if (chartType === 'sales') {
              productChart.data.datasets[0].label = 'Số lượng bán ra';
              productChart.data.datasets[0].data = [120, 90, 180, 70, 110];
            } else if (chartType === 'profit') {
              productChart.data.datasets[0].label = 'Lợi nhuận (Triệu VNĐ)';
              productChart.data.datasets[0].data = [8.5, 5.2, 7.8, 6.3, 9.1];
            }
            
            productChart.update();
          });
        });
        
        // Handle chart period change
        document.getElementById('chartPeriod').addEventListener('change', function() {
          const period = this.value;
          
          if (period === 'day') {
            revenueChart.data.labels = ['T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'CN'];
            revenueChart.data.datasets[0].data = [2.1, 1.8, 2.5, 2.7, 3.2, 4.5, 3.8];
          } else if (period === 'week') {
            revenueChart.data.labels = ['Tuần 1', 'Tuần 2', 'Tuần 3', 'Tuần 4'];
            revenueChart.data.datasets[0].data = [12, 15, 13, 18];
          } else if (period === 'month') {
            revenueChart.data.labels = ['T1', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'T8', 'T9', 'T10', 'T11', 'T12'];
            revenueChart.data.datasets[0].data = [25, 30, 35, 42, 48, 53, 58, 65, 60, 70, 75, 80];
          }
          
          revenueChart.update();
        });
      });
    </script>
  </body>
</html> 